\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{tex/senecasongs}[2022/07/29 Style for
Seneca Songs book and website page PDFs]

\RequirePackage[T1]{fontenc}

\RequirePackage{venturis}
\NewDocumentCommand{\VenturisGoth}{}{\fontfamily{yvod}\selectfont}

\RequirePackage{crimson}

\RequirePackage{sectsty}
\allsectionsfont{\sffamily}

\RequirePackage{microtype}
\linespread{1.08}

\RequirePackage[
    paperheight=8.5in, 
    paperwidth=5.5in,
    vmargin=1in
]{geometry}

\RequirePackage{semantic-markup}
\RequirePackage{musicography}
\RequirePackage{MnSymbol}

\RequirePackage{booktabs}
\RequirePackage{enumitem}
\setlist{noitemsep}

\RequirePackage[authordate]{biblatex-chicago}

\RequirePackage{graphicx}
\graphicspath{{media}}

\NewExpandableDocumentCommand{\@aacMainTitle}{}{}
\NewExpandableDocumentCommand{\@aacSubTitle}{}{}
\NewExpandableDocumentCommand{\@aacAuthor}{}{}
\NewExpandableDocumentCommand{\@aacPublisher}{}{}
\NewExpandableDocumentCommand{\@aacCopyright}{}{}
\NewExpandableDocumentCommand{\@aacCoverImage}{}{}

\NewDocumentCommand{\setMainTitle}{ m }{%
    \RenewExpandableDocumentCommand{\@aacMainTitle}{}{#1}%
}

\NewDocumentCommand{\setSubTitle}{ m }{%
    \RenewExpandableDocumentCommand{\@aacSubTitle}{}{#1}%
}

\NewDocumentCommand{\setAuthor}{ m }{%
    \RenewExpandableDocumentCommand{\@aacAuthor}{}{#1}%
}

\NewDocumentCommand{\setPublisher}{ m }{%
    \RenewExpandableDocumentCommand{\@aacPublisher}{}{#1}%
}

\NewDocumentCommand{\setCopyright}{ m }{%
    \RenewExpandableDocumentCommand{\@aacCopyright}{}{#1}%
}

\NewDocumentCommand{\setCoverImage}{ m }{%
    \RenewExpandableDocumentCommand{\@aacCoverImage}{}{#1}%
}


\NewDocumentEnvironment{pitchMatrix}{ m }{%
    \begin{tabular}{ r *{12}c }
        & 0 & 1 & 2 & 3 & 4 & 5 & 6 & 7 & 8 & 9 & 10 & 11 \\
        & \tabularize{#1} \\
}{%
    \end{tabular}
}

\NewDocumentCommand{\pcset}{ m m }{%
    #1 & \tabularize{#2} \\
    % TODO put $\blacksquare$ if n is in arg #2, blank otherwise
}

\ExplSyntaxOn
\NewDocumentCommand{\tabularize}{ m }{%
    \aac_tabularize:n { #1 }
}

\tl_new:N \l__aac_tabularize_text_tl

\cs_new_protected:Nn \aac_tabularize:n
{
    \tl_set:Nx \l__aac_tabularize_text_tl { #1 }
    \tl_replace_all:Nnn \l__aac_tabularize_text_tl { , } { & }
    \tl_use:N \l__aac_tabularize_text_tl
}
\ExplSyntaxOff

\RequirePackage{hyperref}
\endinput
